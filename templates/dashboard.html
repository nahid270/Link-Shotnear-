<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>My Dashboard</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">...</nav> <!-- Navbar আগের মতোই -->
    <div class="container mt-4">
        <!-- নতুন Stats সেকশন -->
        <div class="row mb-4">
            <div class="col-md-6"><div class="card text-center"><div class="card-body">
                <h5 class="card-title">Total Views</h5><p class="card-text fs-2" id="total-views">0</p>
            </div></div></div>
            <div class="col-md-6"><div class="card text-center"><div class="card-body">
                <h5 class="card-title">Estimated Earnings</h5><p class="card-text fs-2" id="total-earnings">$0.00</p>
            </div></div></div>
        </div>
        <div class="card mb-4"><div class="card-body">...</div></div> <!-- Shorten Form আগের মতোই -->
        <h3>My Links</h3>
        <div class="table-responsive"><table class="table table-striped">...</table></div> <!-- Table আগের মতোই -->
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // ... (login check, logout, admin button আগের মতোই থাকবে) ...
        const token = localStorage.getItem('jwt_token');
        if (!token) { window.location.href = '/login-page'; }
        // ...
        
        async function fetchDashboardData() {
            // CPM রেট আনা হচ্ছে
            const settingsResponse = await fetch('/api/settings', { headers: { 'Authorization': `Bearer ${token}` } });
            const settings = await settingsResponse.json();
            const cpmRate = settings.cpm_rate || 0;

            // ব্যবহারকারীর লিঙ্ক আনা হচ্ছে
            const linksResponse = await fetch('/user/links', { headers: { 'Authorization': `Bearer ${token}` } });
            const links = await linksResponse.json();
            
            let totalClicks = 0;
            const tableBody = document.getElementById('links-table-body');
            tableBody.innerHTML = '';
            links.forEach(link => {
                totalClicks += link.clicks;
                // ... (টেবিল তৈরির কোড আগের মতোই) ...
            });

            // মোট ভিউ এবং আয় দেখানো হচ্ছে
            document.getElementById('total-views').textContent = totalClicks;
            const earnings = (totalClicks / 1000) * cpmRate;
            document.getElementById('total-earnings').textContent = `$${earnings.toFixed(4)}`;
        }
        
        fetchDashboardData();
        // ... (Shorten Form-এর কোড আগের মতোই থাকবে) ...
    });
    </script>
</body>
</html>
